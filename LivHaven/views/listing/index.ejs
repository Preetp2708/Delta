<% layout('/layouts/boilerplate') -%>

<body style="background-color: #f4e3ce;">

  <div class="container py-5">

    <!-- Page Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1 class="h3 text-success mb-0">All Listings</h1>
      <form action="/listing/new" method="GET">
        <button class="btn btn-success btn-lg rounded-pill shadow-sm">
          + Add Listing
        </button>
      </form>
    </div>

    <!-- Listings Grid -->
    <div class="row g-4">
      <% listing.forEach(listing => { %>
        <div class="col-md-6 col-lg-4">
          <div class="card shadow-sm h-100 border-0 listing-card" 
               data-id="<%= listing._id %>" 
               style="cursor: pointer;">

            <!-- Image -->
            <% if (listing.image) { %>
              <img src="<%= listing.image.url%>" class="card-img-top" alt="<%= listing.title %>" 
                   style="height:200px; object-fit:cover; border-top-left-radius:12px; border-top-right-radius:12px;">
            <% } else { %>
              <img src="/images/default-listing.jpg" class="card-img-top" alt="Default Listing" 
                   style="height:200px; object-fit:cover; border-top-left-radius:12px; border-top-right-radius:12px;">
            <% } %>

            <!-- Card Body -->
            <div class="card-body d-flex flex-column justify-content-between">
              <h5 class="card-title text-primary text-center" id="list-title"><%= listing.title %></h5>
            </div>

          </div>
        </div>
      <% }) %>
    </div>

  </div>

</body>
